teamArray = [{
                  "name":"Yousra El Hassan",
                  "id":1,
                  "year":"Freshmen",
                  "origin":"Sudan",
                  "srcScreen":"/images/team/module/Yousra.jpg",
                  "srcThumb":"/images/team/module/Yousra-thumb.jpg",
                  "topic":"",
                  "text":"<p>Hey there! I’m Yousra El Hassan and I’m from (now North) Sudan but was raised right here in Abu Dhabi. I’m part of the TEDxNYUAD team because I love seeing things come together and writing up emails, both of which I’m currently enjoying plenty of. I drink a whole lot of 7-UP even though it murdered my laptop, I eat my pizza with broccoli on the side, I have the spelling level of a 5th grader and I love the sound of scissors cutting through paper.</p>"
                },
                {
                  "name":"Sangeetha Mahadevan",
                  "id":2,
                  "year":"Sophomore",
                  "origin":"India",
                  "srcScreen":"/images/team/module/sangheeta.jpg",
                  "srcThumb":"/images/team/module/sangheeta-thumb.jpg",
                  "topic":"",
                  "text":"<p>Hey! I am Sangeetha. Quick facts about me. I love music, people, and making people laugh (even though I'm not good at that). TEDx is a huge part of my heart as there is something very special about hearing the people you know share their stories. Also, I love ice cream. No, it's actually a serious problem.</p>"
                },
                {
                  "name":"Samuel Ridgeway",
                  "id":3,
                  "year":"Senior",
                  "origin":"UK",
                  "srcScreen":"/images/team/module/empty.jpg",
                  "srcThumb":"/images/team/module/X.jpg",
                  "topic":"",
                  "text":"<p>After the privilege of speaking at the inaugural TEDxNYUAD conference, Sam now has the pleasure of organising the 2016 conference. Sam loves that he gets to provide a platform for the NYUAD community to share their stories.For his biology research project, Sam works with falcons… and collects their poo! He also has a passion filmmaking and aspires to have a career in science communication. Sam hopes you enjoy the talks!</p>"
                },
                {
                  "name":"Frederik Brinck Jensen",
                  "id":4,
                  "year":"Sophomore",
                  "origin":"",
                  "srcScreen":"/images/team/module/frederik.jpg",
                  "srcThumb":"/images/team/module/frederik-thumb.jpg",
                  "topic":"",
                  "text":"<p></p>"
                },
                {
                  "name":"Shujaat Mirza",
                  "id":5,
                  "year":"Sophomore",
                  "origin":"Pakistan",
                  "srcScreen":"/images/team/module/shujaat.jpg",
                  "srcThumb":"/images/team/module/shujaat-thumb.jpg",
                  "topic":"",
                  "text":"<p>Hey there! I’m Shujaat from Pakistan. Born and raised in the country, I went on to live in Islamabad for a couple of years before joining NYUAD. I am majoring in Computer Science with a concentration in Interactive Media. I am part of TEDxNYUAD because of the inspiration I felt upon hearing some of the stories at last year’s event. In my spare time, I like writing code, flying kites and watching cricket.</p>"
                },
                {
                  "name":"Harshini Karunaratne",
                  "id":6,
                  "year":"",
                  "origin":"Sri Lanka/Peru",
                  "srcScreen":"/images/team/module/empty.jpg",
                  "srcThumb":"/images/team/module/harshini-thumb.jpg",
                  "topic":"",
                  "text":"<p>Hi there! I’m Harshini, an Asian-Latino with a passion for photography. Born and raised in Sri Lanka, but I am also half Peruvian. Last year, I helped on marketing and logistics for the inaugral TEDxNYUAD. This year I am part of the Leadership team and coordingaing with speakers in New York! I’m someone who’s nocturnal and so I go to sleep really late but at the same time there never seems to be enough hours in a day. Two things I really love is the sound of birds chirping in the morning, and being part of TEDxNYUAD!</p>"
                },
                {
                  "name":"Theodore Tenev",
                  "id":7,
                  "year":"Freshmen",
                  "origin":"Bulgaria",
                  "srcScreen":"/images/team/module/theo.jpg",
                  "srcThumb":"/images/team/module/theo-thumb.jpg",
                  "topic":"",
                  "text":"<p>Theodore was born and raised in Bulgaria, where he attended an international school. Currently he is pursuing a Computer Science degree in New York University, Abu Dhabi. Theodore’s personal passion is information security, while hobbies include playing tennis and golf, as well as watching all genres of movies. </p>"
                },
                {
                  "name":"Mia Averianova",
                  "id":8,
                  "year":"Freshmen",
                  "origin":"Ukraine",
                  "srcScreen":"/images/team/module/mia.jpg",
                  "srcThumb":"/images/team/module/mia-thumb.jpg",
                  "topic":"",
                  "text":"<p>Hello there! My name is Mia. Born in Kiev, Ukraine, I now live in a beautiful country Slovenia. Before coming to NYUAD to pursue an Economics major, I was part of multiple Slovene music ensembles. I always travel with a book of Pushkin’s poems, I am a neat freak, and I eat my cereal with hot (has to be hot) almond milk. I’m part of TEDxNYUAD because I want to help NYUAD students create and share their inspiring stories. In my spare time I enjoy watching musicals, hiking with my dogs and reading as many articles on psychology of human relationships as I can find.</p>"
                },
                {
                  "name":"Maitha AlMemari",
                  "id":9,
                  "year":"Sophomore",
                  "origin":"UAE",
                  "srcScreen":"/images/team/module/maitha.jpg",
                  "srcThumb":"/images/team/module/maitha-thumb.jpg",
                  "topic":"",
                  "text":"<p>Yo, my name is Maitha AlMemari, I am from Abu Dhabi and I am a NYUAD sophomore majoring in Social Research and Public Policy. I was a TEDx speaker last year which was a great rewarding experience that I was not ready to let go of, so this year I am on the other side of the table and helping with organising the event as well as working with speakers. My passions vary from donuts to environmental law and during my spare time I enjoy checking out the latest space exploration technologies and plan ways to go to the moon.</p>"
                },
               {
                  "name":"Safa Kashaf",
                  "id":10,
                  "year":"Sophomore",
                  "origin":"Pakistan",
                  "srcScreen":"/images/team/module/empty.jpg",
                  "srcThumb":"/images/team/module/X.jpg",
                  "topic":"",
                  "text":"<p>My name is Safa Kashaf. I am currently a sophomore studying Civil Engineering with a concentration in The Environment. My ultimate dream is to one day go to law school and study Energy and Environmental Law and Policy. I'm a die hard Brazilian football fan, a huge supporter of breakfast in bed and love reading historical fiction and watching crime shows. I'm passionate about debate, public speaking and story telling and hope that in my time with TEDxNYUAD I can inspire those around me to find their voice and share their unique stories, skills and perspectives.</p>"
                },
               {
                  "name":"Jovan Jovancevic",
                  "id":11,
                  "year":"Sophomore",
                  "origin":"Montenegro",
                  "srcScreen":"/images/team/module/jovan.jpg",
                  "srcThumb":"/images/team/module/jovan-thumb.jpg",
                  "topic":"",
                  "text":"<p>Jovan is a sophomore computer engineering student at NYUAD. Born in Serbia and raised in Montenegro, Jovan spent two years in Slovenia before coming to Abu Dhabi. Upon coming to NYUAD, he engaged in a handful of activities, among which are the work in synthetic biology and the work in underwater drone technology. Other than that, Jovan is a passionate chess player and last April he gave a TEDx talk on blindfold chess. Rumors are he actually does that in spare time! Jovan enjoys football and sometimes eats nutella and cheese. Other than that, he is a good guy.</p>"
                },
                {
                  "name":"Lauren You",
                  "id":12,
                  "year":"",
                  "origin":"South Korea",
                  "srcScreen":"/images/team/module/lauren.jpg",
                  "srcThumb":"/images/team/module/lauren-thumb.jpg",
                  "topic":"",
                  "text":"<p>Hi, my name is Lauren You. I’m from Seoul but have spent almost half of my life in Penang and Beijing. I like doing the most random things in my free time including (but not limited to) looking at stars, standing in the breeze, and listening to ocean waves! I value the little things in life and believe in learning through experience. With that said, TEDx makes me appreciate life more by bringing my attention to the simple but meaningful aspects of life as well as introducing me to novel and creative ideas.</p>"
                },
            {
                  "name":"William Young",
                  "id":13,
                  "year":"",
                  "origin":"Australia",
                  "srcScreen":"/images/team/module/will.jpg",
                  "srcThumb":"/images/team/module/Will-thumb.jpg",
                  "topic":"",
                  "text":"<p>William Young, a Mechanical Engineering student from Australia has been involved in various projects and leadership roles with NYUAD and UAE organisations! He is an enthusiastic basketball player, cyclist and runner and was awarded the Al Khayr Award for Healthy Living for encouraging others to embrace a healthy lifestyle. William enjoys his current Residential Assistant, TEDxNYUAD and Google Student Club roles as he appreciates the personal development and opportunity to contribute back to the community.</p>"
                },
            {
              "name":"Stephen Kho",
              "id":14,
              "year":"Sophomore",
              "origin":"The Netherlands",
              "srcScreen":"/images/team/module/empty.jpg",
              "srcThumb":"/images/team/module/stephen-thumb.jpg",
              "topic":"",
              "text":"<p>Hi there! My name is Stephen, I was born and raised in Amsterdam, the Netherlands. Being part of TEDxNYU's Global Ops team has shown me what an impact TEDx can have on our communities (and beyond), which is why I joined the TEDxNYUAD team! I'm particularly good at putting together IKEA furniture and love the sound of a tennis ball scratching the net. </p>"
            },
            {
              "name":"Neel Vohra",
              "id":15,
              "year":"Sophomore",
              "origin":"The Netherlands",
              "srcScreen":"/images/team/module/empty.jpg",
              "srcThumb":"/images/team/module/neel-thumb.jpg",
              "topic":"",
              "text":"<p></p>"
            }];

/*
// Takes in number of organizers.
//
// Returns Array [x,y,z] where x, y and z are the number of speakers per line and the Array.length + 1 is the number of rows. 
//
*/
function rowSetup(numOfSpeakers){
  switch(numOfSpeakers){
    case 0:
      break;
    case 1:
      return [1];
      break;
    case 2:
      return [2];
      break;
    case 3:
      return [3];
      break;
    case 4:
      return [4];
      break;
    case 5:
      return [3,2];
      break;
    case 6:
      return [3,3];
      break;
    case 7:
      return [4,3];
      break;
    case 8:
      return [3,2,3];
      break;
    case 9:
      return [3,3,3];
      break;
    case 10:
      return [3,4,3];
      break;
    case 11:
      return [4,3,4]
      break;
    case 12:
      return [4,4,4];
      break;
    case 13:
      return [4,4,4,1];
      break;
    case 14:
      return [4,3,4,3];
      break;
    case 15:
      return [3,4,3,2,3];
      break;
    case 16:
      return [4,3,4,3,2];
      break;
    case 17:
      return [3,4,3,4,3];
      break;
    case 18:
      return [4,3,4,3,4];
      break;
    case 19:
      return [3,4,3,4,3,2];
      break;
    case 20:
      return [3,4,3,4,3,3];
      break;
    default:
      return [numOfSpeakers];
  }
}

function speakerMenuArrangement(n,speakersArray){
    //Modify content for small menu
    var numberOfCols=n;
    var speakersMenu=[];
    for(var i=1;i<=speakersArray.length;i++){
        //Get the start position in the array for the given column
        var start=(i-1)*numberOfCols;
        
        //Find the end position in the array for the given column
        var end=(i*numberOfCols>=speakersArray.length) ? speakersArray.length : i*numberOfCols;
        
        speakersMenu[i-1]=[];
        speakersArray.slice(start,end).forEach(function(element){
            speakersMenu[i-1].push(element);
        });
        if(i*numberOfCols>=speakersArray.length)
            break;
    }
    return speakersMenu;
}

function speakerArrangement(immutableSpeakersArray, arrangementArray){
  var speakerList = [];
  var speakersArray = immutableSpeakersArray.slice();
  for (num in arrangementArray) {
    var internalList = [];
    switch(arrangementArray[num]){
      case 2:
        var bsClass = 6;
        break;
      case 3:
        var bsClass = 4;
        break;
      case 4:
        var bsClass = 3;
      default:
        var bsClass = 12/arrangementArray[num];
    }
    for(var speaker = 0;speaker < arrangementArray[num]; speaker++){
      internalList.push(speakersArray[0]);
      internalList[speaker]["bsClass"] = bsClass;
      speakersArray.shift();
    }
    speakerList.push(internalList);
  }
  return speakerList;
}


var keystone = require('keystone');
    Newsletter = keystone.list('Newsletter'); //Required for newsletter signup

exports = module.exports = function(req, res) {
	
	var view = new keystone.View(req, res),
		locals = res.locals;
    
    locals.section = 'about';
	
	// item in the header navigation.
    locals.content = [{ template:'standard',
                        macro:'standard',
                        arguments:{
                                    title:'Mission Statement',
                                    text:'<p>TEDxNYUAD aspires to create a platform for members of the NYU Abu Dhabi student body to share their innovative ideas, achievements, and challenges. NYU Abu Dhabi, as a world-class research university with a worldly community, is home to stories that can shape our future. We see it as our mission to share these stories with the world and aim to inspire Abu Dhabi and, in particular, its youth, and show them that making an impact in the world is not an unimaginable task.</p>'
                                  }
                      },
                      { template:'speakers',
                        macro:'standard',
                        arguments:{ 
                            speakers: teamArray,
                            arrangement: rowSetup(teamArray.length),
                            speakersMenu: speakerMenuArrangement(2,teamArray),
                            speakerRows: speakerArrangement(teamArray, rowSetup(teamArray.length))
                                  }
                      },
                      {
                        template:'standard',
                        macro: 'logodisplay',
                        arguments:{arrangement:[],
                                   title:'Thanks to our Partners',
                                   text: '<p>We would not be able to pull off this incredible event without the help and generous support of our wonderful partners.</p>',
                                   partners:[{
                                              name: "NYUAD Institute",
                                              logo:"./images/partners/nyuad-institute.png",
                                             },
                                             {
                                              name: "NYUAD Office of Student Activities",
                                              logo: "./images/partners/nyuad-office-student-activities.png"
                                             }]
                                  }
                      },
                      { template:'standard',
                       macro:'standard',
                       arguments:{ title:'About TEDx, x = independently organized event',
                                  text:'<p>In the spirit of ideas worth spreading, TEDx is a program of local, self-organized events that bring people together to share a TED-like experience. At a TEDx event, TED Talks video and live speakers combine to spark deep discussion and connection. These local, self-organized events are branded TEDx, where x = independently organized TED event. The TED Conference provides general guidance for the TEDx program, but individual TEDx events are self-organized.</p><p><a href="http://ted.com/tedx">Read more about TEDx</a></p>'}
                      },{
                          template:'standard',
                          macro:'standard',
                          arguments:{
                              title:'About TED',
                              text:'<p>TED is a nonprofit organization devoted to Ideas Worth Spreading. Started as a four-day conference in California 30 years ago, TED has grown to support its mission with multiple initiatives. The two annual TED Conferences invite the world\'s leading thinkers and doers to speak for 18 minutes or less. Many of these talks are then made available, free, at TED.com. TED speakers have included Bill Gates, Jane Goodall, Elizabeth Gilbert, Sir Richard Branson, Nandan Nilekani, Philippe Starck, Ngozi Okonjo-Iweala, Sal Khan and Daniel Kahneman.</p><p>The annual TED Conference takes place each spring in Vancouver, British Columbia, along with the TEDActive simulcast event in nearby Whistler. The annual TEDGlobal conference will be held this October in Rio de Janeiro, Brazil. TED\'s media initiatives include TED.com, where new TED Talks are posted daily; the Open Translation Project, which provides subtitles and interactive transcripts as well as translations from volunteers worldwide; the educational initiative TED-Ed. TED has established the annual TED Prize, where exceptional individuals with a wish to change the world get help translating their wishes into action; TEDx, which supports individuals or groups in hosting local, self- organized TED-style events around the world, and the TED Fellows program, helping world-changing innovators from around the globe to amplify the impact of their remarkable projects and activities.'}
                      }];
    
    
    //Required for newsletter signup
    locals.formData = req.body || {};
    view.on('post', { action: 'newsletter' }, function(next) {
		var newNewsletter = new Newsletter.model(),
			updater = newNewsletter.getUpdateHandler(req);

        updater.process(req.body, {
			flashErrors: true,
			fields: 'email',
			errorMessage: 'There was a problem submitting your enquiry:'
		}, function(err) {
			if (err) {
				locals.validationErrors = err.errors;
			} else {
				locals.newsletterSignup = true;
			}
			next();
		});
	});
    //--------------
    
	// Render the view
	view.render('about');
	
};
